# ============================================================================
# LumiMD Backend Environment Variables
# ============================================================================
# IMPORTANT: Copy this file to .env and fill in your actual API keys
# NEVER commit .env files to git - they contain sensitive secrets
#
# SECURITY NOTICE:
# - This is a HIPAA-compliant medical application
# - All API keys must be kept secure and rotated regularly
# - If keys are exposed, rotate them immediately following the process below
# ============================================================================

# ----------------------------------------------------------------------------
# AssemblyAI API Key for audio transcription
# ----------------------------------------------------------------------------
# Get your key from: https://www.assemblyai.com/dashboard
#
# TO ROTATE (if exposed):
# 1. Go to https://www.assemblyai.com/dashboard
# 2. Delete the old API key
# 3. Generate a new API key
# 4. Update this .env file
# 5. Deploy to Firebase: firebase functions:config:set assemblyai.api_key="NEW_KEY"
# 6. Redeploy functions: firebase deploy --only functions
ASSEMBLYAI_API_KEY=your_assemblyai_api_key_here

# ----------------------------------------------------------------------------
# OpenAI API Key for visit summarization and medication extraction
# ----------------------------------------------------------------------------
# Get your key from: https://platform.openai.com/api-keys
#
# TO ROTATE (if exposed):
# 1. Go to https://platform.openai.com/api-keys
# 2. Revoke the old API key
# 3. Create a new API key
# 4. Update this .env file
# 5. Deploy to Firebase: firebase functions:config:set openai.api_key="NEW_KEY"
# 6. Redeploy functions: firebase deploy --only functions
OPENAI_API_KEY=your_openai_api_key_here

# ----------------------------------------------------------------------------
# External Drug Data (RxNav) Configuration
# ----------------------------------------------------------------------------
# Enable external drug interaction lookups
EXTERNAL_DRUG_DATA_ENABLED=true
# Override base URL if needed (default: https://rxnav.nlm.nih.gov/REST)
EXTERNAL_DRUG_DATA_BASE_URL=https://rxnav.nlm.nih.gov/REST
# Request timeout in milliseconds
EXTERNAL_DRUG_DATA_TIMEOUT_MS=5000

# ----------------------------------------------------------------------------
# Webhook Secret for verifying AssemblyAI webhook requests
# ----------------------------------------------------------------------------
# Generate a secure random string using: openssl rand -hex 32
#
# TO ROTATE (if exposed):
# 1. Generate new secret: openssl rand -hex 32
# 2. Update this .env file
# 3. Deploy to Firebase: firebase functions:config:set webhook.visit_processing_secret="NEW_SECRET"
# 4. Redeploy functions: firebase deploy --only functions
# 5. Update AssemblyAI webhook configuration if using webhooks
VISIT_PROCESSING_WEBHOOK_SECRET=your_webhook_secret_here

# ----------------------------------------------------------------------------
# CORS Allowed Origins (Security)
# ----------------------------------------------------------------------------
# Comma-separated list of allowed origins for CORS
# IMPORTANT: Only add trusted domains to prevent unauthorized access
#
# Example for production:
# ALLOWED_ORIGINS=https://app.lumimd.com,https://portal.lumimd.com
#
# For development:
# - Localhost origins (3000, 19006, 8081) are automatically allowed in dev mode
# - Set NODE_ENV=production to enforce strict origin checking
#
# SECURITY NOTE:
# - Never use wildcards (*) in production
# - Each origin must include the protocol (https://)
# - Mobile apps don't send Origin headers, so they're unaffected by CORS
ALLOWED_ORIGINS=https://your-production-domain.com

# ----------------------------------------------------------------------------
# Environment Configuration
# ----------------------------------------------------------------------------
# Set to 'production' to enable strict security settings:
# - Lower rate limits (100 req/15min vs 500)
# - Strict auth rate limiting (5 attempts/15min vs 50)
# - CORS restricted to ALLOWED_ORIGINS only
NODE_ENV=development

# ----------------------------------------------------------------------------
# Medication Safety Recheck
# ----------------------------------------------------------------------------
# Set to "false" to disable Firestore rechecks
MED_SAFETY_RECHECK_ENABLED=true

# ============================================================================
# ROTATION CHECKLIST
# ============================================================================
# If any secrets are exposed:
# ✓ 1. Immediately revoke/delete the exposed keys in the provider dashboards
# ✓ 2. Generate new keys following the instructions above
# ✓ 3. Update local .env file
# ✓ 4. Update Firebase functions config
# ✓ 5. Redeploy functions
# ✓ 6. Verify application is working with new keys
# ✓ 7. Check git history to ensure secrets were never committed
# ============================================================================

# Resend API Key (for sending emails)
# Get your key from: https://resend.com/api-keys
RESEND_API_KEY=your_resend_api_key_here
